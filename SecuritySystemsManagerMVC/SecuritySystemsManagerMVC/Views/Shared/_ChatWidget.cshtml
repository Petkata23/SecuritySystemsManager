@{
    var currentUserId = User.FindFirst(System.Security.Claims.ClaimTypes.NameIdentifier)?.Value;
    var currentUserName = User.FindFirst(System.Security.Claims.ClaimTypes.Name)?.Value;
    var currentUserIdInt = 0;
    int.TryParse(currentUserId, out currentUserIdInt);
}


<!-- Chat Widget Button -->
<div id="chatWidget" class="chat-widget" data-user-id="@currentUserIdInt">
    <div class="chat-widget-button" id="chatWidgetButton">
        <i class="bi bi-chat-dots"></i>
        <span class="chat-notification-badge" id="chatNotificationBadge" style="display: none;">0</span>
    </div>
    
    <!-- Chat Widget Panel -->
    <div class="chat-widget-panel" id="chatWidgetPanel" style="display: none;">
        <div class="chat-widget-header">
            <h6 class="mb-0">
                <i class="bi bi-headset"></i> Support Chat
            </h6>
            <button type="button" class="btn-close" id="closeChatWidget">
                <i class="bi bi-x"></i>
            </button>
        </div>
        
        <div class="chat-widget-body">
            <div id="chatWidgetContent">
                <div class="text-center p-3" id="welcomeMessage">
                    <i class="bi bi-chat-dots text-muted" style="font-size: 2rem;"></i>
                    <p class="text-muted mt-2">Welcome to the chat support!</p>
                    <p class="text-muted small">Our team is here to help you.</p>
                </div>
            </div>
        </div>
        
        <div class="chat-widget-footer">
            <div class="input-group">
                <input type="text" class="form-control" id="chatWidgetInput" placeholder="Enter message...">
                <button class="btn btn-primary" type="button" id="chatWidgetSendBtn">
                    <i class="bi bi-send"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<script src="~/js/chat-widget.js" asp-append-version="true"></script> 